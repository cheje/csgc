{"version":3,"sources":["Header.jsx","Introduction.jsx","Dataset.js","StackedBars.jsx","Portfolios.jsx","Bubbles.jsx","CR.jsx","Scrollytelling.jsx","Shiny.jsx","Map3D.jsx","config.js","BelowMap.js","Footer.js","App.jsx","index.js","img/shiny-expenses.png","img/shiny-cr.png"],"names":["Header","className","style","marginTop","fontWeight","textTransform","fontFamily","fontSize","fontStyle","Background","paddingTop","Dataset","StackedBars","svgRef","useRef","useEffect","d3","then","data","years","Set","map","d","tcie_year","push","sort","keys","console","log","boros","dimensions","width","window","innerWidth","height","innerHeight","margin","top","bottom","left","right","boundedWidth","boundedHeight","svg","current","attr","xScale","domain","range","padding","yScale","nice","yGrid","tickFormat","tickSize","scale","append","call","colorScale","stackedBarsData","stackedBarsGen","selectAll","join","key","bandwidth","xAxis","ticks","length","tickSizeOuter","text","yAxis","borosRev","reverse","i","ref","display","Portfolios","href","target","Bubbles","fetch","response","json","colors","root","size","children","sum","buildings","bubble","tooltip","node","enter","x","y","circle","r","boro_names","on","e","select","html","ownername","this","pageY","pageX","label","substring","transition","ease","duration","color","alt","CR","Scrollytelling","projection","fitSize","features","points","plot","geometry","coordinates","cr","properties","cr_pct","callbacks","exp_pct","scrollama","setup","step","onStepEnter","index","element","onStepExit","id","class","Shiny","paddingBottom","src","expensesSS","boxShadow","crSS","layerTypes","alignments","transformRequest","url","hasQuery","indexOf","Chapter","theme","title","image","description","classList","currentChapterID","Map","props","state","currentChapter","chapters","config","mapStart","location","mapboxgl","accessToken","container","mapContainer","center","zoom","pitch","bearing","marker","Marker","setLayerOpacity","layer","layerType","getLayer","type","getLayerPaintType","forEach","prop","setPaintProperty","opacity","showMarkers","setLngLat","addTo","setState","bind","scroller","offset","progress","chapter","find","chap","flyTo","onChapterEnter","onChapterExit","addEventListener","resize","position","el","subtitle","byline","alignment","footer","Component","process","BelowMap","Footer","justifyContent","App","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.e59d3b6a.chunk.js","sourcesContent":["import React from \"react\"\nimport './index.css'\n\nexport default function Header() {\n    return (\n        <div className=\"header\">\n            <section>\n                <h1 className=\"header--title\">\n                    Disrepair, Displacement and Distress\n                </h1>\n                <h3 className=\"header--subhead\">\n                    Finding Housing Stories Through Data Visualizations\n                </h3>\n                <p style={{ marginTop: '-15px', fontWeight: 'bold', textTransform: 'uppercase', fontFamily: 'Roboto Condensed', fontSize: '0.85em' }}>By Jennifer Cheng</p>\n                <p style={{ fontStyle: 'italic' }}>This project comprises the digital component of the capstone requirement for the Data Analysis and Visualization M.S. program at the CUNY Graduate Center. The text below pulls from portions of the white paper.</p>\n            </section>\n        </div>\n    )\n}","import React from \"react\"\nimport './index.css'\n\nexport default function Background() {\n    return (\n        <div>\n            <section>\n                <h4 className=\"subhead\" style={{paddingTop: \"100px\"}}>\n                Background\n                </h4>\n                <p>\n                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elementum nulla, at iaculis lacus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Nunc at est a mi consequat feugiat. Morbi eu egestas enim. Quisque dictum est ut lacus mollis viverra. Quisque nisi felis, eleifend a blandit ut, sodales in massa. Suspendisse sagittis in leo sed eleifend. Nunc molestie ultrices lectus quis hendrerit.\n                </p>\n                <p>\n                In convallis eleifend neque, sit amet bibendum est bibendum sit amet. Ut sit amet ex odio. Aliquam erat volutpat. Nam at ullamcorper augue, eget tempus ante. Ut magna risus, imperdiet eu lorem at, semper aliquam nulla. Ut nec volutpat odio. Phasellus fermentum sapien tincidunt quam scelerisque, at maximus metus tempus. Maecenas pulvinar mi risus, nec molestie enim feugiat vel. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Phasellus tempus metus ligula, a rutrum eros porta ut. Sed porta risus eu lorem iaculis, id malesuada diam mollis. Maecenas nec ullamcorper nisl. Nulla dignissim elit ac odio sodales, quis ultricies velit fermentum. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n                </p>\n                <p>\n                In convallis eleifend neque, sit amet bibendum est bibendum sit amet. Ut sit amet ex odio. Aliquam erat volutpat. Nam at ullamcorper augue, eget tempus ante. Ut magna risus, imperdiet eu lorem at, semper aliquam nulla. Ut nec volutpat odio. Phasellus fermentum sapien tincidunt quam scelerisque, at maximus metus tempus. Maecenas pulvinar mi risus, nec molestie enim feugiat vel. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Phasellus tempus metus ligula, a rutrum eros porta ut. Sed porta risus eu lorem iaculis, id malesuada diam mollis. Maecenas nec ullamcorper nisl. Nulla dignissim elit ac odio sodales, quis ultricies velit fermentum. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n                </p>\n            </section>\n        </div>\n    )\n}","import React from \"react\"\nimport './index.css'\n\nexport default function Dataset() {\n    return (\n        <div>\n            <section>\n                <h4 className=\"text subhead\">\n                    Dataset\n                </h4>\n                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elementum nulla, at iaculis lacus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Nunc at est a mi consequat feugiat. Morbi eu egestas enim. Quisque dictum est ut lacus mollis viverra. Quisque nisi felis, eleifend a blandit ut, sodales in massa. Suspendisse sagittis in leo sed eleifend. Nunc molestie ultrices lectus quis hendrerit.</p>\n\n                <p>\n                In convallis eleifend neque, sit amet bibendum est bibendum sit amet. Ut sit amet ex odio. Aliquam erat volutpat. Nam at ullamcorper augue, eget tempus ante. Ut magna risus, imperdiet eu lorem at, semper aliquam nulla. Ut nec volutpat odio. Phasellus fermentum sapien tincidunt quam scelerisque, at maximus metus tempus. Maecenas pulvinar mi risus, nec molestie enim feugiat vel. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Phasellus tempus metus ligula, a rutrum eros porta ut. Sed porta risus eu lorem iaculis, id malesuada diam mollis. Maecenas nec ullamcorper nisl. Nulla dignissim elit ac odio sodales, quis ultricies velit fermentum. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n                </p>\n            </section>\n        </div>\n    )\n}","import React, { useRef, useEffect } from 'react'\nimport * as d3 from 'd3'\nimport './index.css'\n\nexport default function StackedBars() {\n\n    const svgRef = useRef()\n    \n    useEffect(() => {\n\n        d3.csv('https://gist.githubusercontent.com/cheje/03a298076db3822e04faaf9b21aadf80/raw/68676b3d01476af66d2bd461136978b655c610b6/tcie-bars.csv')\n        .then(data => {\n\n            // create categories (years) for x-axis\n            let years = [...new Set(data.map(d => d.tcie_year))]\n            years.push('2007', '2012', '2016')\n            years.sort()\n            years.keys()\n            console.log(years)\n\n            // create stacks for each year\n            // const boros = [...new Set(data.map(d => d.boro_name))]\n            const boros = ['Manhattan', 'Bronx', 'Brooklyn', 'Queens', 'Staten Island']\n            console.log(boros)\n\n            // wrapper dimensions (following format in A. Wattenberger's 'Fullstack D3')\n            const dimensions = {\n                width: window.innerWidth*0.8,\n                height: window.innerHeight*0.6,\n                margin: { top: 10, bottom: 50, left: 90, right: 50 }\n            }\n\n            // bounds dimensions\n            dimensions.boundedWidth = dimensions.width // 90% of window\n             - dimensions.margin.left\n             - dimensions.margin.right\n\n             dimensions.boundedHeight = dimensions.height // 90% of window\n             - dimensions.margin.top\n             - dimensions.margin.bottom\n\n            // set up svg container\n            const svg = d3.select(svgRef.current)\n                .attr('width', dimensions.width)\n                .attr('height', dimensions.height)\n\n            // scales\n            const xScale = d3.scaleBand() // ordinal data\n                .domain(years)\n                .range([dimensions.margin.left, dimensions.boundedWidth])\n                .padding([0.2])\n\n            const yScale = d3.scaleLinear()\n                .domain([0, 16000])\n                .range([dimensions.boundedHeight, dimensions.margin.left])\n                .nice()\n\n            \n                \n            // horizontal gridlines\n            const yGrid = d3.axisLeft()\n                .tickFormat('')\n                .tickSize(-dimensions.boundedWidth + dimensions.margin.left)\n                .scale(yScale)\n\n            svg.append('g')\n                .attr('class', 'y-gridlines')\n                .attr('transform', `translate(${dimensions.margin.left}, 0)`)\n                .call(yGrid)\n\n            // color scale\n            const colorScale = d3.scaleOrdinal()\n                .domain(boros)\n                .range(['#355070', '#6d597a', '#b56576', '#e56b6f', '#eaac8b'])\n            \n            // generate bar stacks\n            const stackedBarsGen = d3.stack()\n                .keys(boros)\n        \n            const stackedBarsData = stackedBarsGen(data)\n\n            // plot bars\n            svg.append('g')\n                .selectAll('g')\n                .data(stackedBarsData)\n                .join('g')\n                .attr('fill', d => colorScale(d.key))\n                .selectAll('rect')\n                .data(d => d)\n                .join('rect')\n                    .attr('x', d => xScale(d.data.tcie_year))\n                    .attr('y', d => yScale(d[1]))\n                    .attr('height', d => yScale(d[0]) - yScale(d[1]))\n                    .attr('width', xScale.bandwidth())\n\n            // x axis\n            const xAxis = d3.axisBottom(xScale)\n                .ticks(years.length)\n                .tickSizeOuter(0)\n\n            svg.append('g')\n                .attr('class', 'x-axis')\n                .attr('transform', `translate(0, ${dimensions.boundedHeight})`)\n                .call(xAxis)\n                .style('text-anchor', 'middle')\n                .attr('dy', '1em')\n                // axis label:\n                .append('text')\n                .attr('x', '50%')\n                .attr('dy', '3.5em')\n                .text('Year of TCIE Filing')\n                \n\n            // y axis\n            const yAxis = d3.axisLeft(yScale)\n\n            svg.append('g')\n                .attr('class', 'y-axis')\n                .attr('transform', `translate(${dimensions.margin.left}, 0)`)\n                .call(yAxis)\n                // axis label:\n                .append('text')\n                .attr('y', '-5em')\n                .attr('dx', '-8%')\n                .attr('transform', 'rotate(270)')\n                .text('Number of TCIE BBLs Found in PLUTO')\n\n            // LEGEND\n            \n            // rev order of boros to match bar color order\n            const borosRev = boros.reverse()\n\n            // squares\n            svg.append('g')\n                .selectAll(\"squares\")\n                .data(borosRev)\n                .join('rect')\n                    .attr(\"x\", '90%')\n                    .attr(\"y\", (d, i) => (90 + i*20))\n                    .attr(\"height\", 10)\n                    .attr(\"width\", 10)\n                    .style(\"fill\", d => colorScale(d))\n              \n              // label\n            svg.append('g')\n                .selectAll(\"labels\")\n                .data(borosRev)\n                .join(\"text\")\n                  .attr(\"x\", '91.5%')\n                  .attr(\"y\", (d, i) => (100 + i*20)) \n                  .style(\"fill\", d => colorScale(d))\n                  .text(d => d)\n                  .style('font-family', 'Roboto')\n                  .style('font-size', '0.75em')\n            \n            // TITLE\n            svg.append('text')\n                .attr('y', '2em')\n                .text('TCIE Filings by Borough')\n                .attr('class', 'chart--title')\n\n            // sources:\n            // https://www.d3-graph-gallery.com/graph/barplot_stacked_hover.html\n            // http://using-d3js.com/05_06_stacks.html\n            // https://github.com/muratkemaldar/using-react-hooks-with-d3/blob/15-stacked-bar-chart/src/StackedBarChart.js\n        })\n}, [])\n    \n    \n\n    return (\n        <div>\n             <svg ref={svgRef} style={{ display: 'block', margin: 'auto' }}>\n                 <g />\n             </svg>\n        </div>\n    )\n}","import React from \"react\"\nimport './index.css'\n\nexport default function Portfolios() {\n    return (\n        <div>\n            <section>\n                <h4 className=\"subhead\">Pulling in Other Datasets</h4>\n                <p>\n                    In \"<a href='https://medium.com/justfixnyc/examining-the-myth-of-the-mom-and-pop-landlord-6f9f252a09c' target='_blank'>Examining the Myth of the 'Mom-and-Pop' Landlord</a>,\" Sam Rabiyah, the data lead and engineer at the housing justice organization <a href='https://www.justfix.nyc/' target='_blank'>JustFix.nyc</a>, details key findings of the group's analysis of city landlords who owned rent-regulated housing properties. \"Larger landlords,\" or those with a sizable portfolio of more than 20 buildings, own about half of the city's rent-regulated properties.\n                    Also of note, larger landlords conducted \"more than half of all executed evictions in 2018.\" \n                </p>\n                <p>\n                    To conduct their study, JustFix.nyc used its <a href='https://whoownswhat.justfix.nyc/' target='_blank'>Who Owns What</a> database tool to \"rebalance the power dynamic between landlords and tenants\" and let users map the expanse of their landlord's portfolio using an algorithm based on the NYC Department of Housing Preservation and Development's registration data for residential properties. The database also <a href='https://whoownswhat.justfix.nyc/en/how-it-works' target='_blank'>pulls from numerous publicly available housing-related data</a> from the city agencies and advocacy organizations. Such projects of gathering these various datasets such as housing violations, 311 maintenance complaints, evictions, among others, in a central searchable location and including maps and other visuals have also been done by other housing groups and government agencies. These sources provide a comprehensive view for tenants and advocates see whether their residential building or neighborhood, or others of interest, possess troubling signs. Joining different datasets together also shows the multitude of potential indicators of speculation, with many of that data being publicly available. I gathered some of these databases in a spreadsheet that I included in the digital component of my capstone. \n                    <p />\n                    <button className='button'><a href='https://airtable.com/shrgUn4Gw76RzAFDU' target='_blank' className='button--link'>Browse Housing Databases</a></button>\n                </p>\n                <p>\n                    For this project, I worked at a smaller scale and combined the TCIE data with the NYC Department of City Planning's <a href='https://www1.nyc.gov/site/planning/data-maps/open-data/dwn-pluto-mappluto.page' target='_blank'>Primary Land Use Tax Output</a> (PLUTO) dataset. With the vast majority of the BBLs in the TCIE set included in the PLUTO list, I could add information on addresses, approximate neighborhoods, boroughs and ownership, as of 2021. Given that landlords who have amassed a considerable number of properties can tend toward speculative behavior, I proceeded with a bubble chart of landlords with at least 10 properties found in the original TCIE data. Of course, buildings have changed hands over the past nearly two decades but at least from this collection of more than 25,000 properties, the visualization, color-coded by the borough(s) in which the landlord's buildings are found, gives an idea of the comparatively larger portfolios even in this sample of properties out of the more than 850,000 in the PLUTO dataset. As above, this chart would also be meant for the eyes of someone looking for trends and individual areas and properties of interest, intended to give them an idea, not comprehensive insight, into ownership among the TCIE dataset. Though it is also visualizing aggregated data, in this case it can lead one in the direction of, say, specific landlords.\n                </p>\n            </section>\n        </div>\n    )\n}","import React, { useRef, useEffect } from 'react'\nimport * as d3 from 'd3'\nimport './index.css'\n\nexport default function Bubbles() {\n\n    const svgRef = useRef()\n    \n    useEffect(() => {\n        \n    fetch('https://gist.githubusercontent.com/cheje/2b36ef7c3d95611281873910f5536b08/raw/0d7dc284ae90f63a111616e2919d81a985a9e3bd/tcie-owners.json')\n        .then(response => response.json())\n        .then(data=> {\n            console.log(data)\n\n            // tutorial: https://www.webtips.dev/how-to-make-interactive-bubble-charts-in-d3-js\n\n            const width = 600;\n            const height = 600;\n\n            const colors = {\n                'Manhattan': '#3A0CA3',\n                'Bronx': '#7209B7',\n                'Brooklyn': '#F72585',\n                'Bronx, Manhattan': '#4361EE',\n                'Brooklyn, Manhattan, Queens': '#4CC9F0',\n                'Manhattan, Bronx, Brooklyn': '#4CC9F0',\n                'Queens': '#4CC9F0'\n            };\n\n            const bubble = data => d3.pack()\n            .size([width, height])\n            .padding(3)(d3.hierarchy({ children: data }).sum(d => d.buildings));\n    \n        const svg = d3.select(svgRef.current)\n            .style('width', width)\n            .style('height', height);\n        \n        const root = bubble(data);\n        const tooltip = d3.select('.tooltip');\n    \n        const node = svg.selectAll()\n            .data(root.children)\n            .enter()\n            .append('g')\n            .attr('transform', d => `translate(${d.x}, ${d.y})`);\n        \n        const circle = node.append('circle')\n            .attr('r', d => d.r)\n            .style('fill', d => colors[d.data.boro_names])\n            .style('opacity', '0.7')\n            .on('mouseover', function (e, d) {\n                tooltip.select('span')\n                .attr('class', 'tooltip-text')\n                .html(`<span style=\"font-weight:bold; color:#FFC900;\">${d.data.ownername}</span> owns <span style='font-weight:bold; color:#FFC900;' }}>${d.data.buildings} properties</span> (in <span style=\"font-weight:bold; color:#FFC900;\">${d.data.boro_names}</span>) found in the TCIE data.`)\n                tooltip.style('visibility', 'visible');\n    \n                d3.select(this).style('stroke', '#fff');\n            })\n            .on('mousemove', e => tooltip.style('top', `${e.pageY}px`)\n                                         .style('left', `${e.pageX + 10}px`))\n            .on('mouseout', function () {\n                d3.select(this).style('stroke', 'none');\n                return tooltip.style('visibility', 'hidden');\n            })\n        \n        const label = node.append('text')\n            .attr('dy', 2)\n            .text(d => d.data.ownername.substring(0, d.r / 4))\n            .attr('class', 'text--bubbles')\n        \n        circle.transition()\n            .ease(d3.easeExpInOut)\n            .duration(1000)\n            .attr('r', d => d.r);\n        \n        label.style('opacity', d => d.data.buildings >= 20 ? 1 : 0)\n       \n       })\n    }, [])\n    \n    \n\n    return (\n        <div style={{ width: '70vw', margin: '0 auto' }}>\n            <div className='flex-container-bubble'>\n                <div className='flex-child vis-caption'>\n                    <div className='chart--title'>Who Owns the Most Buildings?</div>\n                    <br />These landlords have amassed the highest number of properties found in the TCIE data. As indicated in <span style={{ color: '#3A0CA3', fontWeight: 'bold' }}>purple</span>, many of these portfolios are made up of buildings <span style={{ color: '#3A0CA3', fontWeight: 'bold' }}>Manhattan</span>.<br /><br />\n                    <p className='vis-caption-small'>Data sources: TCIE, PLUTO</p>\n                </div>\n                <div className='flex-child'>\n                    <svg ref={svgRef} style={{ display: 'block', margin: 'auto' }}></svg>\n                    <div className=\"tooltip\">\n                    <img alt=\"\" />\n                        <div>\n                            <a></a>\n                            <span></span>\n                        </div>\n                        </div>\n                </div>\n            </div>\n        </div>\n    )\n}","import React from \"react\"\nimport './index.css'\n\nexport default function CR() {\n    return (\n        //<div style={{ boxShadow: `5px 8px 20px rgba(0, 0, 0, 0.2)` }}>\n        <div>\n            <section>\n                <h5 className=\"subsubhead\">Cap Rates, a Qualitative Indicator</h5>\n                <p>\n                    For the Landlords Project, <a href='https://www.linkedin.com/in/kate-a-ham' target='_blank'>Kate Ham</a>, housing justice advocate pursuing a UC Berkeley master of city planning degree, added a capitalization rate variable for the TCIE dataset. They noted that in a conversation with Jacob Udell of the <a href='https://unhp.org/' target='_blank'>University Neighborhood Housing Program</a>, he said that the most accurate cap rates should be in the year a building was sold <i>when that year is within a year of the TCIE filing year</i>, whether that be the year before, after or of the year of the filing. This generated cap rates for some 3,500 buildings. The lower the cap rate, namely at the 3.5 and below threshold, the greater the likelihood of speculative behavior. How a cap rate is derived, as noted below, implies that lower rates result from lower incomes (numerator) relative to the market value of a building.\n                </p>\n                <p>\n                    Cap rates can serve as a qualitiative variable in helping to suspect potentially distressed housing. The NYC Department of Housing Preservation and Development analyzes cap rates when populating its <a href='https://data.cityofnewyork.us/Housing-Development/Speculation-Watch-List/adax-9mit' target='_blank'>Speculation Watch List</a>, of mostly rent-regulated multiple dweeling units. HPD compares a property's cap rate, which it <a href='https://www1.nyc.gov/site/hpd/about/speculation-watch-list.page' target='_blank'>describes</a> as the building's \"net operating income divided by its sales price\" to the median cap rate of similar properties purchased in the same borough. Those with cap rates below the media value of the borough make the list. In their \"<a href='https://www1.nyc.gov/assets/hpd/downloads/pdfs/services//speculation-watch-list-adopted-rules.pdf' target='_blank'>Statement of Basis and Purpose</a>\" for the speculation watch list, HPD states: <br /><br />\n                    <blockquote><i>\"Such below average Capitalization Rates suggest purchase prices exceeding the value of these properties, which is based upon their net operating income. When a purchaser is willing to pay more than the property value, it indicates a greater potential for tenant harassment so that the purchaser can recoup its inflated purchase price through forcing tenants out in order to escalate rents.\"</i></blockquote>\n                </p>\n                <p>\n                In its explanation on the cap rate, the <a href='https://homevestorsfranchise.com/blog/northeast/2021/04/understanding-cap-rates-in-nyc-the-basics-you-need-to-know/' target='_blank'>HomeVestors Franchise</a> notes that the net operating cost in the equation is that of \"after expenses\"; this NOI is divided by the \"current market value\" and not what the landlord had paid for the building as \"any renovations or improvements you do will affect the market value and, subsequently, the cap rate.\" \n                </p>\n                <p>\n                With this understanding of how expenses factor into determining cap rates, we can use the two variables to transition from visualizations of aggregated data to those of actual data points and start digging through potential buildings of interest.\n                </p>\n                \n            </section>\n        </div>\n    )\n}","import React, { useRef } from 'react';\nimport './index.css';\nimport * as d3 from 'd3';\nimport scrollama from 'scrollama';\n\nexport default function Scrollytelling() {\n  const svgRef = useRef();\n\n  d3.json('https://gist.githubusercontent.com/cheje/19f1b2cd100181c85f5c59f5e9d7be9f/raw/64d74131a9bef399456fd212e167826b96cc1acd/nyc-boroughs.geojson')\n        //.then(response => response.json())\n        .then(data => {\n            console.log(data[1])\n\n        const width = 800\n\t\tconst height = 750\n\n        const svg = d3.select(svgRef.current)\n            .attr('width', width)\n            .attr('height', height);\n\n        const projection = d3.geoAlbers()\n            .fitSize([800, 750], data);\n\n        svg.append(\"g\")\n            .selectAll(\"path\")\n            .data(data.features)\n            .enter()\n            .append(\"path\")\n            .attr('fill', '#d0d9cd')\n            .attr(\"d\", d3.geoPath()\n            .projection(projection))\n            .style(\"stroke\", 'rgba(255,255,255,0.5)')\n            \n          svg.append('text')\n            .attr('x', '50%')\n            .attr('y', '85%')\n            .html(`Data sources: NYC Planning (<a href='https://www1.nyc.gov/site/planning/data-maps/open-data/census-download-metadata.page' target='_blank'>NTAs GeoJSON</a>), TCIE, PLUTO`)\n            .attr('class', 'vis-caption-small')\n\n\n          d3.json(\"https://gist.githubusercontent.com/cheje/fb731829fb4fe824f32f675c9fca880f/raw/0125a55d280661b27ac2686d90e3bc42a27c438c/tcie-points.geojson\")\n          .then(points => {\n            const plot = svg.selectAll()\n                .data(points.features)\n                .enter()\n                .append(\"circle\")\n                .attr(\"cx\", d => projection(d.geometry.coordinates)[0])\n                .attr(\"cy\", d => projection(d.geometry.coordinates)[1])\n\n        function all() {\n            plot.attr(\"r\", \"1\")\n            .style(\"fill\", 'rgba(115, 85, 111, 0)')\n            .style('stroke', '#8C6887')\n        }\n\n        function exp() {\n            plot.transition()\n            .duration(1000)\n            .style('stroke', d => (+d.properties.exp_pct <= 35 && d.properties.exp_pct !== null) ? 'rgba(242, 89, 82, 1)' : 'rgba(140, 104, 135, 0.5)')\n            .style('fill', d => (+d.properties.exp_pct <= 35 && d.properties.exp_pct !== null) ? 'rgba(242, 89, 82, 0)' : 'rgba(140, 104, 135, 0)')\n        }\n\n        function cr() {\n            plot.transition()\n            .duration(1000)\n            .attr('r', d => (+d.properties.cr_pct <= 3.5 && +d.properties.cr_pct > 0 && +d.properties.cr_pct !== null) ? 3 : 2)\n            .style('stroke', d => (+d.properties.cr_pct <= 3.5 && +d.properties.cr_pct > 0 && d.properties.cr_pct !== null) ? '#FFEB4D' : 'rgba(140, 104, 135, 0.5)')\n            .style('fill', d => (+d.properties.cr_pct <= 3.5 && +d.properties.cr_pct > 0 && d.properties.cr_pct !== null) ? '#FFEB4D' : 'rgba(140, 104, 135, 0)')\n        }\n\n        \n        \n        const callbacks = [\n            all, exp, cr, cr, cr,\n          ];\n      \n          const steps = d3.selectAll('.step');\n      \n          // instantiate the scrollama\n          const scroller = scrollama();\n      \n          // setup the instance, pass callback functions\n          scroller\n            .setup({\n              step: '.step',\n            })\n            .onStepEnter((response) => {\n              callbacks[response.index]()\n              //steps.style('opacity', 0.1)\n              d3.select(response.element).style('opacity', 1)\n            })\n            .onStepExit((response) => {})\n        })\n    }, [])\n\n  return (\n        <div className=\"container\">\n          <svg id=\"chart\" ref={svgRef}></svg>\n          <div class=\"steps\">\n            <div class=\"step\">\n              When plotting the 25,000 TCIE buildings found in the PLUTO set,\n            </div>\n            <div class=\"step\">\n              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer\n              non lacus non est ultrices faucibus. Nunc gravida libero eu velit\n              sagittis congue.\n            </div>\n            <div class=\"step\">\n              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer\n              non lacus non est ultrices faucibus. Nunc gravida libero eu velit\n              sagittis congue.\n            </div>\n            <div class=\"step\">\n              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer\n              non lacus non est ultrices faucibus. Nunc gravida libero eu velit\n              sagittis congue.\n            </div>\n          </div>\n        </div>\n  );\n}\n","import React from 'react'\nimport './index.css'\nimport expensesSS from './img/shiny-expenses.png'\nimport crSS from './img/shiny-cr.png'\n\nexport default function Shiny() {\n    return(\n        <section>\n            <div style={{ paddingBottom: '50px' }}>\n            Quisque bibendum enim at arcu molestie cursus. Fusce sollicitudin orci lacus, vel pulvinar ipsum sodales ac. Quisque quis enim auctor, elementum lorem a, pretium massa. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Vivamus ac nulla tincidunt, mollis nisi et, lacinia tellus. Fusce dictum risus ac rutrum luctus. Duis id libero molestie, elementum ligula a, laoreet orci. Maecenas tellus augue, efficitur nec mattis eu, viverra ac sapien.\n            </div>\n            <div className='flex-container-shiny'>\n                <div className='flex-child'>\n                Pellentesque sit amet nulla elit. Etiam convallis quis purus eleifend pellentesque. Donec nec aliquam tortor. Vivamus eget mauris sapien. Aliquam eget dictum sapien, tempor posuere ipsum. Maecenas lacinia varius hendrerit. Vestibulum vehicula tincidunt pharetra. Suspendisse potenti.\n                </div>\n                <div className='flex-child'>\n                <a href='https://jenche.shinyapps.io/lpexp/' target='_blank'><img width='400px' alt='Screenshot of expenses dashboard' src={expensesSS} style={{ boxShadow: '1px 2px 5px rgba(0, 0, 0, 0.1)' }}/></a>\n                    <button className='button'><a href='https://jenche.shinyapps.io/lpexp/' target='_blank' className='button--link'>EXPENSES</a></button>\n                </div>\n            </div>\n<br />\n            <div className='flex-container-shiny'>\n                <div className='flex-child'>\n                    Pellentesque sit amet nulla elit. Etiam convallis quis purus eleifend pellentesque. Donec nec aliquam tortor. Vivamus eget mauris sapien. Aliquam eget dictum sapien, tempor posuere ipsum. Maecenas lacinia varius hendrerit. Vestibulum vehicula tincidunt pharetra. Suspendisse potenti.\n                </div>\n                <div className='flex-child'>\n                <a href='https://jenche.shinyapps.io/lpcr/' target='_blank'><img width='400px' src={crSS} alt='Screenshot of cap rates dashboard' style={{ boxShadow: '1px 2px 5px rgba(0, 0, 0, 0.1)' }}/></a>\n                    <button className='button'><a href='https://jenche.shinyapps.io/lpcr/' target='_blank' className='button--link'>CAP RATES</a></button>\n                </div>\n            </div>\n        </section>\n    )\n}","import React, { Component } from 'react';\nimport './Map3D.css';\nimport mapboxgl from 'mapbox-gl';\nimport scrollama from 'scrollama';\n\nconst layerTypes = {\n    'fill': ['fill-opacity'],\n    'line': ['line-opacity'],\n    'circle': ['circle-opacity', 'circle-stroke-opacity'],\n    'symbol': ['icon-opacity', 'text-opacity'],\n    'raster': ['raster-opacity'],\n    'fill-extrusion': ['fill-extrusion-opacity']\n}\n\nconst alignments = {\n    'left': 'lefty',\n    'center': 'centered',\n    'right': 'righty'\n}\n\nconst transformRequest = (url) => {\n    const hasQuery = url.indexOf(\"?\") !== -1;\t  \n    const suffix = hasQuery ? \"&pluginName=journalismScrollytelling\" : \"?pluginName=journalismScrollytelling\";\t  \n    return {\n      url: url + suffix\n    }\t  \n}\n\nclass Map extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentChapter: props.chapters[0]\n        };\n        // this.setState = this.setState.bind(this);\n    }\n\n    componentDidMount() {\n        const config = this.props;\n        const mapStart = config.chapters[0].location;\n\n        mapboxgl.accessToken = config.accessToken;\n\n        const map = new mapboxgl.Map({\n            container: this.mapContainer,\n            style: config.style,\n            center: mapStart.center,\n            zoom: mapStart.zoom,\n            pitch: mapStart.pitch,\n            bearing: mapStart.bearing,\n            transformRequest: transformRequest\n        });\n\n        const marker = new mapboxgl.Marker();\n        if (config.showMarkers) {\n            marker.setLngLat(mapStart.center).addTo(map);\n        }\n\n        function getLayerPaintType(layer) {\n            var layerType = map.getLayer(layer).type;\n            return layerTypes[layerType];\n        }\n\n        function setLayerOpacity(layer) {\n            var paintProps = getLayerPaintType(layer.layer);\n            paintProps.forEach(function(prop) {\n                map.setPaintProperty(layer.layer, prop, layer.opacity);\n            });\n        }\n\n        const setState = this.setState.bind(this);\n\n        // instantiate the scrollama\n        const scroller = scrollama();\n\n        map.on('load', function () {\n\n            // setup the instance, pass callback functions\n            scroller\n            .setup({\n                step: '.step',\n                offset: 0.5,\n                progress: true\n            })\n            .onStepEnter(response => {\n                const chapter = config.chapters.find(chap => chap.id === response.element.id);\n                setState({currentChapter:chapter});\n                map.flyTo(chapter.location);\n                if (config.showMarkers) {\n                    marker.setLngLat(chapter.location.center);\n                }\n                if (chapter.onChapterEnter.length > 0) {\n                    chapter.onChapterEnter.forEach(setLayerOpacity);\n                }\n            })\n            .onStepExit(response => {\n                var chapter = config.chapters.find(chap => chap.id === response.element.id);\n                if (chapter.onChapterExit.length > 0) {\n                    chapter.onChapterExit.forEach(setLayerOpacity);\n                }\n            });\n        });\n\n        window.addEventListener('resize', scroller.resize);\n    }\n\n    render() {\n        const config = this.props;\n        const theme = config.theme;\n        const currentChapterID = this.state.currentChapter.id;\n        return (\n            <div style={{ position: 'relative' }}> {/*, boxShadow: `5px 8px 10px rgba(0, 0, 0, 0.05)`*/}\n                <div ref={el => this.mapContainer = el} className=\"absolute top right left bottom\" />\n                <div id=\"story\">\n                    {config.title &&\n                        <div id=\"header\" className={theme}>\n                            <h1>{config.title}</h1>\n                            {config.subtitle &&\n                                <h2>{config.subtitle}</h2>\n                            }\n                            {config.byline &&\n                                <p>{config.byline}</p>\n                            }\n                        </div>\n                    }\n                    <div id=\"features\" className={alignments[config.alignment]}>\n                        {\n                            config.chapters.map(chapter => \n                                <Chapter key={chapter.id} theme={theme} {...chapter} currentChapterID={currentChapterID}/>\n                            )\n                        }\n                    </div>\n                    {config.footer &&\n                        <div id=\"footer\" className={theme}>\n                            <p>{config.footer}</p>\n                        </div>\n                    }\n                </div>\n            </div>\n        );\n    }\n\n}\n\nfunction Chapter({id, theme, title, image, description, currentChapterID}) {\n    const classList = id === currentChapterID ? \"step active\" : \"step\";\n    return (\n        <div id={id} className={classList}>\n            <div className={theme}>\n                { title &&\n                    <h3 className=\"title\">{title}</h3>\n                }\n                { image &&\n                    <img src={image} alt={title}></img>\n                }\n                { description &&\n                    <p>{description}</p>\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default Map;\n","var config = {\n    style: 'mapbox://styles/jenche/ckxy9mihs40ew14phbjizimgm',\n    accessToken: `${process.env.REACT_APP_MAPBOX_TOKEN}`,\n    showMarkers: false,\n    alignment: 'right',\n    theme: 'light',\n    //title: 'Glaciers of Glacier National Park',\n    //subtitle: 'Change in coverage from 1998 to 2015',\n    //byline: '',\n    //footer: 'Source: Story text from Wikipedia, August 2019. Data from <a href=\"https://www.usgs.gov/centers/norock/science/retreat-glaciers-glacier-national-park\">USGS</a>',\n    chapters: [\n        {\n            id: '',\n            //title: 'Distressed Buildings',\n            //image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/2015-06-19_Glacier_National_Park_%28U.S.%29_8633.jpg/800px-2015-06-19_Glacier_National_Park_%28U.S.%29_8633.jpg',\n            description: 'Scroll through to see residential buildings with residential that have been covered by local news outlets for reasons that might suggest speculation on the part of the owner.',\n            location: {\n                center: [-74.006, 40.7128],\n                zoom: 10,\n                pitch: 0.00,\n                bearing: 0.00\n            },\n            onChapterEnter: [\n                // {\n                //     layer: 'gnpglaciers-1998',\n                //     opacity: 0.25\n                // },\n                // {\n                //     layer: 'glaciernp-boundary',\n                //     opacity: 0.25\n                // }\n            ],\n            onChapterExit: [\n                // {\n                //     layer: 'glaciernp-boundary',\n                //     opacity: 0\n                // }\n            ]\n        },\n        {\n            id: '2028420065',\n            title: '1387 Grand Concourse, Bronx',\n            //image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/2015-06-19_Glacier_National_Park_%28U.S.%29_8633.jpg/800px-2015-06-19_Glacier_National_Park_%28U.S.%29_8633.jpg',\n            description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam metus augue, faucibus sed bibendum vel, aliquam quis dui. Integer convallis metus ac nisl dignissim vestibulum. Maecenas eget fermentum dui, sit amet laoreet odio. Etiam eu ligula vulputate, tristique mi id, tristique arcu. Etiam ac nunc augue. In at tellus turpis. Pellentesque molestie porttitor egestas. Pellentesque tempus metus leo, eu viverra est luctus id. Vestibulum ac ipsum dictum justo dignissim molestie quis nec massa. Ut egestas vitae turpis eget fermentum.',\n            location: {\n                center: [-73.914617, 40.838445],\n                zoom: 18,\n                pitch: 75,\n                bearing: -30\n            },\n            onChapterEnter: [\n                // {\n                //     layer: 'gnpglaciers-1998',\n                //     opacity: 0.25\n                // },\n                // {\n                //     layer: 'glaciernp-boundary',\n                //     opacity: 0.25\n                // }\n            ],\n            onChapterExit: [\n                // {\n                //     layer: 'glaciernp-boundary',\n                //     opacity: 0\n                // }\n            ]\n        },\n        {\n            id: '2031560027',\n            title: '2055 Anthony Avenue, Bronx',\n            image: '',\n            description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris dictum purus vitae erat suscipit scelerisque. Proin nisi nulla, varius a aliquet vel, aliquam ac enim. Nam euismod tellus vitae dui lobortis malesuada. Nullam nisl urna, hendrerit sed tincidunt ut, facilisis ac tellus. Vivamus ut arcu quis diam molestie varius.',\n            location: {\n                center: [-73.9025, 40.8525],\n                zoom: 18,\n                pitch: 75,\n                bearing: 25\n            },\n            onChapterEnter: [],\n            onChapterExit: [\n                // {\n                //     layer: 'gnpglaciers-2015',\n                //     opacity: 0\n                // }\n            ]\n        },\n        {\n            id: '3086830075',\n            title: '3100 Brighton 2 Street, Brooklyn',\n            image: '',\n            description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris dictum purus vitae erat suscipit scelerisque. Proin nisi nulla, varius a aliquet vel, aliquam ac enim. Nam euismod tellus vitae dui lobortis malesuada. Nullam nisl urna, hendrerit sed tincidunt ut, facilisis ac tellus. Vivamus ut arcu quis diam molestie varius.',\n            location: {\n                center: [-73.9652, 40.576],\n                zoom: 18,\n                pitch: 75,\n                bearing: 25\n            },\n            onChapterEnter: [],\n            onChapterExit: [\n                // {\n                //     layer: 'gnpglaciers-2015',\n                //     opacity: 0\n                // }\n            ]\n        }\n    ]\n};\n\nexport default config;","import React from \"react\"\nimport './index.css'\n\nexport default function BelowMap() {\n    return (\n        <div style={{ paddingTop: \"45px\"}}>  {/*, boxShadow: `inset 0 -8px 8px -10px rgba(0, 0, 0, 0.9)` }*/}\n            <section>\n                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elementum nulla, at iaculis lacus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Nunc at est a mi consequat feugiat. Morbi eu egestas enim. Quisque dictum est ut lacus mollis viverra. Quisque nisi felis, eleifend a blandit ut, sodales in massa. Suspendisse sagittis in leo sed eleifend. Nunc molestie ultrices lectus quis hendrerit.</p>\n\n                <p>\n                In convallis eleifend neque, sit amet bibendum est bibendum sit amet. Ut sit amet ex odio. Aliquam erat volutpat. Nam at ullamcorper augue, eget tempus ante. Ut magna risus, imperdiet eu lorem at, semper aliquam nulla. Ut nec volutpat odio. Phasellus fermentum sapien tincidunt quam scelerisque, at maximus metus tempus. Maecenas pulvinar mi risus, nec molestie enim feugiat vel. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Phasellus tempus metus ligula, a rutrum eros porta ut. Sed porta risus eu lorem iaculis, id malesuada diam mollis. Maecenas nec ullamcorper nisl. Nulla dignissim elit ac odio sodales, quis ultricies velit fermentum. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n                </p>\n            </section>\n        </div>\n    )\n}","import React from \"react\"\nimport './index.css'\n\nexport default function Footer() {\n    return (\n        <div style={{ justifyContent: 'flex-end'}} className='footer--links'>\n            {/* <section style={{ display: 'flex', justifyContent: 'flex-end' }}> */}\n            <section style={{ color: '#ffffff' }}>\n                    <a href='https://github.com/cheje/gccs' target='_blank'><img width='15px' alt='GitHub logo' src='/img/GitHub-Mark-Light-64px.png'/></a>&nbsp;&nbsp;\n                    <a href='https://jenche.shinyapps.io/lpcr/' target='_blank'>Data sources</a>&nbsp;|&nbsp;\n                    <a href='https://jenche.shinyapps.io/lpcr/' target='_blank'>Methodology</a>&nbsp;|&nbsp;\n                    <a href='https://natural-twill-b5c.notion.site/Resources-9110b585bb174d8cb6d217474b3f891d' target='_blank'>Resources</a>&nbsp;|&nbsp;\n                    <a href='https://jenche.shinyapps.io/lpcr/' target='_blank'>Thank you</a>&nbsp;|&nbsp;\n                    <a href='mailto:jcheng1@gradcenter.cuny.edu' target='_blank'>Email</a>&nbsp;&nbsp;\n            </section>\n        </div>\n    )\n}","import React from \"react\"\nimport './index.css'\nimport Header from \"./Header\"\nimport Introduction from \"./Introduction\"\nimport Dataset from \"./Dataset\"\nimport StackedBars from './StackedBars'\nimport Portfolios from './Portfolios'\nimport Bubbles from './Bubbles'\nimport CR from \"./CR\"\nimport Scrollytelling from './Scrollytelling'\nimport Shiny from './Shiny'\nimport Map3D from \"./Map3D\"\nimport config from './config.js'\nimport BelowMap from \"./BelowMap\"\nimport Footer from \"./Footer\"\n\nexport default function App() {\n  return (\n    <div>\n      <Header />\n      <Introduction />\n      <Dataset />\n      <StackedBars />\n      <Portfolios />\n      <Bubbles />\n      <CR />\n      <Scrollytelling />\n      <Shiny />\n      <Map3D {...config} />\n      <BelowMap />\n      <Footer />\n    </div>\n  )\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","module.exports = __webpack_public_path__ + \"static/media/shiny-expenses.0d6212f1.png\";","module.exports = __webpack_public_path__ + \"static/media/shiny-cr.d8f40791.png\";"],"sourceRoot":""}